
<app-navbar></app-navbar>
<div class="container-fluid" [formGroup]="timesheetForm">
    <h3>Employee Timesheet</h3>
    <div class="row">
        <p>Live Time: {{ currentDateTime | date: 'medium' }}</p>
    </div>
    <div class="row">
        <div class="col">
            <label for="timeslotId" class="m-3">Timeslot:</label>
            <select id="timeslotId">
                <option selected disabled>--Select timeslot--</option>
                <option *ngFor="let ts of timeslots"
                    value="{{ts.sloT_ID}}">{{ts.timeslot}}</option>
            </select>
        </div>
    </div>

    <div class="row">
        <div class="col-2">
            <div class="nav flex-column nav-pills" id="v-pills-tab"
                role="tablist" aria-orientation="vertical">
                <button class="nav-link active my-1" data-toggle="pill"
                    data-target="#v-pills-home" role="tab"
                    (click)="selectFunc(fun.fuN_ID)"
                    aria-controls="v-pills-home" *ngFor="let fun of functions"
                    aria-selected="true" type="button">{{fun.fuN_NAME}}</button>
            </div>
        </div>
        <div class="col-10">

            <div class="row border p-3 mt-3">
                <table>
                    <tr>
                        <td>
                            <label for>ClientCode - ProjectName</label>
                            <select class="w-100"
                                formControlName="projectAndClient"
                                (change)="onprojectselect($event)">
                                <option selected disabled>-- Select Project Name
                                    --</option>
                                <option
                                    *ngFor="let prod of projectClients"
                                    [value]="prod.proJ_ID">{{
                                    prod.client_code+'-'+prod.proj_name
                                    }}</option>
                            </select>
                            <div class="text-danger"
                                *ngIf="timesheetForm.get('projectAndClient')?.invalid && timesheetForm.get('projectAndClient')?.touched">
                                clientCode-productName is required
                            </div>
                        </td>

                        <td>
                            <label for>Modules</label>
                            <select class="w-100"
                                formControlName="module"
                                (change)="onselectModule($event)">
                                <option selected disabled>-- Select Module
                                    --</option>
                                <option value="{{module.moD_ID}}"
                                    *ngFor="let module of modules">{{module.module}}</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for>Time Mode</label>
                            <select class="w-100"
                                formControlName="type "
                                (change)="onselectTimeType($event)">

                                <option value [selected]="true">--
                                    Select Module
                                    --</option>
                                <option value="1">Full</option>
                                <option value="2">Split</option>
                            </select>
                        </td>
                        <td *ngIf="condition">
                            <label for>Time</label>
                            <select class="w-100"
                                formControlName="minute">
                                <option value disabled>Select
                                    Minute</option>
                                <option *ngFor="let min of minutes"
                                    [value]="min+1">{{
                                    min+1
                                    }} minutes</option>
                            </select>

                        </td>
                        <td>
                            <label for>Description</label>
                            <textarea
                                formControlName="description"></textarea>
                        </td>
                        <td>
                            <button class="btn btn-success"
                                type="submit"
                                (click)="onSubmit()"
                                [disabled]="timesheetForm.invalid">
                                Submit Task
                            </button>
                        </td>
                    </tr>
                </table>
            </div>

            <div class="row justify-content-center">
                <button class="btn btn-success w-25"
                    (click)="onApproveClick()"
                    [disabled]="taskApproved">Approved Task</button>
            </div>

        </div>
    </div>